<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>Web scene - slides | Sample | ArcGIS API for JavaScript 4.20</title>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    
      #slidesDiv {
        background-color: white;
        opacity: 0.9;
        color: black;
        padding: 10px;
        visibility: hidden;
        bottom: 20px;
        overflow-y: auto;
        text-align: center;
        height: 260px;
      }

      #slidesDiv .slide {
        /* Show cursor as pointer when on a slide */
        cursor: pointer;
        margin-bottom: 6px;
      }

      #slidesDiv .slide .title {
        /* Center the title text */
        text-align: center;
      }
      /* Draw active slide with a nice border around the thumbnail */

      #slidesDiv .slide.active img {
        box-shadow: 0px 0px 12px black;
        border-style: solid;
        border-width: thin;
        border-color: black;
      }
    </style>

    <link rel="stylesheet" href="https://js.arcgis.com/4.20/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.20/"></script>

    <script>
      require([
        "esri/views/SceneView",
        "esri/WebScene",
        "esri/webscene/Slide","esri/identity/OAuthInfo", "esri/identity/IdentityManager"],
				(SceneView, WebScene, Slide, OAuthInfo, esriId) => {

		// 		var oAuthInfo = new OAuthInfo({
    //     appId: "3J5KLAwvLYZ2CAga"
    // });
    // esriId.registerOAuthInfos([oAuthInfo]);
        /*********************************************************************
         * Create a new WebScene referencing a WebScene ID from ArcGIS Online
         * or an on-premise portal.
         *********************************************************************/
        const scene = new WebScene({
          portalItem: {
            // autocasts as new PortalItem()
            id: "c28d269394414b0cb55b2e3308816bb3"
          }
        });

        /*********************************************************************
         * Reference the WebScene in a SceneView instance.
         *********************************************************************/
        const view = new SceneView({
          map: scene,
          container: "viewDiv"
        });

        view.ui.add(["slidesDiv"], "top-right");

        /*********************************************************************
         * Function to create the UI for a slide by creating DOM nodes and
         * adding them to the slidesDiv container.
         *********************************************************************/
        function createSlideUI(slide, placement) {
          /*********************************************************************
           * Create a new <div> element which contains all the slide information.
           * Store a reference to the created DOM node so we can use it to place
           * other DOM nodes and connect events.
           *********************************************************************/
          const slideElement = document.createElement("div");
          // Assign the ID of the slide to the <span> element
          slideElement.id = slide.id;
          slideElement.classList.add("slide");

          /*********************************************************************
           * Place the newly created DOM node cat the beginning of the slidesDiv
           *********************************************************************/
          const slidesDiv = document.getElementById("slidesDiv");
          if (placement === "first") {
            slidesDiv.insertBefore(slideElement, slidesDiv.firstChild);
          } else {
            slidesDiv.appendChild(slideElement);
          }

          /*********************************************************************
           * Create a <div> element to contain the slide title text
           *********************************************************************/
          const title = document.createElement("div");
          title.innerText = slide.title.text;
          // Place the title of the slide in the <div> element
          slideElement.appendChild(title);

          /*********************************************************************
           * Create a new <img> element and place it inside the newly created slide
           * element. This will reference the thumbnail from the slide.
           *********************************************************************/
          const img = new Image();
          // Set the src URL of the image to the thumbnail URL of the slide
          img.src = slide.thumbnail.url;
          // Set the title property of the image to the title of the slide
          img.title = slide.title.text;
          // Place the image inside the new <div> element
          slideElement.appendChild(img);

          /*********************************************************************
           * Set up a click event handler on the newly created slide. When clicked,
           * the code defined below will execute.
           *********************************************************************/
          slideElement.addEventListener("click", () => {
            /*******************************************************************
             * Remove the "active" class from all elements with the .slide class
             *******************************************************************/
            const slides = document.querySelectorAll(".slide");
            Array.from(slides).forEach((node) => {
              node.classList.remove("active");
            });

            /*******************************************************************
             * Add the "active" class on the current element being selected
             *******************************************************************/
            slideElement.classList.add("active");

            /******************************************************************
             * Applies a slide's settings to the SceneView.
             *
             * Each slide has a viewpoint and visibleLayers property that define
             * the point of view or camera for the slide and the layers that should
             * be visible to the user when the slide is selected. This method
             * allows the user to animate to the given slide's viewpoint and turn
             * on its visible layers and basemap layers in the view.
             ******************************************************************/
            slide.applyTo(view);
          });
        }

        view.when(() => {
          /*********************************************************************
           * The slides will be placed in the 'slidesDiv' <div> element.
           *********************************************************************/
          document.getElementById("slidesDiv").style.visibility = "visible";

          /*********************************************************************
           * The slides are a collection inside the presentation property of
           * the WebScene.
           *********************************************************************/
          const slides = scene.presentation.slides;

          /*********************************************************************
           * Loop through each slide in the collection and render the slide
           *********************************************************************/
          slides.forEach(createSlideUI);
        });
      });
    </script>
  </head>

  <body>
    <div id="viewDiv"></div>
    <div id="createSlideDiv" class="esri-widget">
      New slide: <input type="text" id="createSlideTitleInput" size="10" />
      <button id="createSlideButton">Create</button>
    </div>
    <div id="slidesDiv" class="esri-widget"></div>
  </body>
</html>